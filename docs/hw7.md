## Домашнее задание №7 «Гарантированные аудит-логи»
### Цель:

Реализовать паттерн **transactional outbox**

### Основное задание:
- Реализовать хранилище задач в БД postegresql со статусами:
  * CREATED - задача создана и ожидает выполнения
  * PROCESSING - задача выполняется
  * FAILED - задача выполнилась неуспешно;
- задача представляет собой запись аудита из ДЗ 5, которая должна попасть из воркер пула в кафку;
- в задаче должна быть информация о логе аудита из ДЗ 5, время создания задачи, время обновления, время завершения;
- обновить воркер пул из ДЗ 5 таким образом, чтобы он создавал задачи и записывал их в БД;
  - если дополнительное задание из ДЗ 5 не было сделано - воркер пул должен в рамках своего же процесса записывать задачу в базу;
  - если дополнительное задание из ДЗ 5 было сделано - первый тип воркеров нужно обновить таким образом, чтобы они не просто сохраняли аудит в базу, а создавали задачу;
- реализовать процесс (вокер пул), который будет каждые N миллисекунд вычитывать хранилище, менять статус у задач на PROCESSING, перекладывать данные в кафку;
- при неудаче записи в кафку задача должна оставаться в БД с обновленным updated_at и измененным статусом (FAILED).
- реализовать отдельный процесс - консьюмер, который будет читать кафку и выводить данные из неё в stdout (консоль).

### Дополнительные задания:
- Для каждой задачи нужно завести счетчик числа попыток (by design число попыток = 3), при неуспешной попытке задача не должна браться в работу в течении 2 секунд, при истечении числа попыток у задачи должен появится статус NO_ATTEMPTS_LEFT;
- сделать миграцию таблички с задачами таким образом, чтобы накопленные в ДЗ 5 аудиты не потерялись, а стали частью задач.

### Подсказки и советы
Для симуляции неуспешной записи в кафку можно выключить кафку(через докер например), чтобы задачи начали попадать в неудачные статусы. 